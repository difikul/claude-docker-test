# Claude Docker Test Project - Full-Stack TODO App

## ğŸ“‹ Popis projektu
Full-stack TODO aplikace demonstrujÃ­cÃ­ kompletnÃ­ modernÃ­ web stack: Docker (PostgreSQL) + Node.js/Express REST API + Vanilla JavaScript frontend s Tailwind CSS.

## ğŸ›  Tech Stack

### Backend
- **Runtime:** Node.js
- **Framework:** Express.js
- **DatabÃ¡ze:** PostgreSQL 16 (Docker)
- **Containerizace:** Docker & Docker Compose
- **Dev Tools:** nodemon
- **Middleware:** CORS, express.json, express.static

### Frontend
- **JavaScript:** Vanilla JS (Fetch API)
- **CSS:** Tailwind CSS (CDN)
- **Design:** Responsive, mobile-first
- **UX:** Loading states, error handling, real-time updates

### Database
- **Migrations:** AutomatickÃ© SQL migrations pÅ™i startu
- **Schema:** todos table (id, title, completed, created_at)

## ğŸ— Architektura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Browser (Frontend)          â”‚
â”‚    - HTML + Tailwind CSS            â”‚
â”‚    - Vanilla JavaScript             â”‚
â”‚    - Fetch API                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ HTTP/REST
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Express REST API             â”‚
â”‚    (server.js - localhost:3000)     â”‚
â”‚                                     â”‚
â”‚  Endpoints:                         â”‚
â”‚  â€¢ GET    /api/todos                â”‚
â”‚  â€¢ POST   /api/todos                â”‚
â”‚  â€¢ PATCH  /api/todos/:id            â”‚
â”‚  â€¢ DELETE /api/todos/:id            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ pg (PostgreSQL client)
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       PostgreSQL 16 Database        â”‚
â”‚    (Docker container - port 5432)   â”‚
â”‚                                     â”‚
â”‚  Tables:                            â”‚
â”‚  â€¢ todos (id, title, completed,     â”‚
â”‚           created_at)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Jak spustit

### 1. Nainstalovat zÃ¡vislosti
```bash
npm install
```

### 2. Spustit PostgreSQL (Docker)
```bash
docker compose up -d
```
Automaticky spustÃ­ SQL migrations z `migrations/` sloÅ¾ky.

### 3. Spustit Express server
```bash
npm run dev
```

### 4. OtevÅ™Ã­t aplikaci
OtevÅ™i prohlÃ­Å¾eÄ na: **http://localhost:3000**

## ğŸ“ API Dokumentace

### GET /api/todos
VrÃ¡tÃ­ vÅ¡echny todos seÅ™azenÃ© podle `created_at DESC`.

**Response:**
```json
{
  "status": "success",
  "count": 3,
  "data": [
    {
      "id": 1,
      "title": "VytvoÅ™it REST API",
      "completed": true,
      "created_at": "2025-10-04T10:00:00.000Z"
    }
  ]
}
```

### POST /api/todos
VytvoÅ™Ã­ novÃ© todo.

**Request Body:**
```json
{
  "title": "NovÃ½ Ãºkol"
}
```

**Response (201):**
```json
{
  "status": "success",
  "message": "Todo created successfully",
  "data": {
    "id": 4,
    "title": "NovÃ½ Ãºkol",
    "completed": false,
    "created_at": "2025-10-04T10:30:00.000Z"
  }
}
```

**Validace:**
- `title` je povinnÃ½
- `title` nesmÃ­ bÃ½t prÃ¡zdnÃ½ string

### PATCH /api/todos/:id
PÅ™epne `completed` status (toggle).

**Response:**
```json
{
  "status": "success",
  "message": "Todo updated successfully",
  "data": {
    "id": 1,
    "title": "VytvoÅ™it REST API",
    "completed": false,
    "created_at": "2025-10-04T10:00:00.000Z"
  }
}
```

**Error (404):**
```json
{
  "status": "error",
  "message": "Todo not found"
}
```

### DELETE /api/todos/:id
SmaÅ¾e todo.

**Response:**
```json
{
  "status": "success",
  "message": "Todo deleted successfully",
  "data": {
    "id": 1,
    "title": "VytvoÅ™it REST API",
    "completed": true,
    "created_at": "2025-10-04T10:00:00.000Z"
  }
}
```

## ğŸ¨ Frontend Features

### UI Komponenty
- âœ… ResponzivnÃ­ design (mobile-first)
- âœ… ModernÃ­ gradient pozadÃ­
- âœ… FormulÃ¡Å™ pro pÅ™idÃ¡nÃ­ TODO
- âœ… Seznam TODO items s animacemi
- âœ… Checkbox pro toggle completed
- âœ… Delete tlaÄÃ­tko (hover efekt)
- âœ… Empty state (kdyÅ¾ nejsou todos)
- âœ… Loading state (spinner)
- âœ… Error state (s auto-hide)
- âœ… Statistiky (celkem/dokonÄeno/zbÃ½vÃ¡)

### UX Features
- Real-time UI update po kaÅ¾dÃ© akci
- Loading spinner pÅ™i naÄÃ­tÃ¡nÃ­
- Error messages s auto-hide (5s)
- Confirm dialog pÅ™i mazÃ¡nÃ­
- PÅ™eÅ¡krtnutÃ½ text u completed items
- Smooth animace pÅ™i pÅ™idÃ¡vÃ¡nÃ­ items

## ğŸ’¾ DatabÃ¡ze

### Migrations
SQL migrations se spouÅ¡tÄ›jÃ­ automaticky pÅ™i prvnÃ­m startu PostgreSQL dÃ­ky volume mappingu:
```yaml
volumes:
  - ./migrations:/docker-entrypoint-initdb.d
```

### Schema
```sql
CREATE TABLE todos (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    completed BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## ğŸ“‚ Struktura projektu

```
claude-docker-test/
â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ 001_create_todos.sql    # SQL migrations
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html               # Frontend HTML (Tailwind CSS)
â”‚   â””â”€â”€ app.js                   # Frontend JavaScript (Vanilla)
â”œâ”€â”€ Claude.MD                    # Tato dokumentace
â”œâ”€â”€ docker-compose.yml           # PostgreSQL sluÅ¾ba
â”œâ”€â”€ package.json                 # Node.js zÃ¡vislosti
â”œâ”€â”€ server.js                    # Express REST API
â”œâ”€â”€ .env.example                 # PÅ™Ã­klad env vars
â”œâ”€â”€ .gitignore                  # Git ignore
â””â”€â”€ README.md                   # UÅ¾ivatelskÃ¡ dokumentace
```

## ğŸ§ª TestovÃ¡nÃ­

### API Test pÅ™Ã­klady
```bash
# Get all todos
curl http://localhost:3000/api/todos

# Create new todo
curl -X POST http://localhost:3000/api/todos \
  -H "Content-Type: application/json" \
  -d '{"title":"Test Ãºkol"}'

# Toggle completed (id=1)
curl -X PATCH http://localhost:3000/api/todos/1

# Delete todo (id=1)
curl -X DELETE http://localhost:3000/api/todos/1
```

### Browser Test
1. OtevÅ™i http://localhost:3000
2. PÅ™idej novÃ½ TODO
3. Klikni na checkbox (toggle completed)
4. Klikni na delete ikonu (smazÃ¡nÃ­)
5. Zkontroluj statistiky

## ğŸ›  PÅ™Ã­kazy

| PÅ™Ã­kaz | Popis |
|--------|-------|
| `npm run dev` | SpustÃ­ dev server s nodemon (auto-reload) |
| `npm start` | SpustÃ­ server v produkÄnÃ­m mÃ³du |
| `docker compose up -d` | SpustÃ­ PostgreSQL na pozadÃ­ |
| `docker compose down` | ZastavÃ­ a odstranÃ­ kontejnery |
| `docker compose logs -f postgres` | ZobrazÃ­ logy PostgreSQL |
| `docker ps` | ZobrazÃ­ bÄ›Å¾Ã­cÃ­ kontejnery |

## ğŸ› Troubleshooting

### PostgreSQL se nespustÃ­
```bash
# Zkontroluj logy
docker compose logs postgres

# Restartuj kontejner
docker compose restart postgres
```

### Frontend neukazuje data
```bash
# Zkontroluj zda server bÄ›Å¾Ã­
curl http://localhost:3000/api/todos

# Zkontroluj browser console (F12)
# Hledej network errors nebo CORS issues
```

### Migrations se nespustily
```bash
# SmaÅ¾ volume a restartuj
docker compose down -v
docker compose up -d

# Zkontroluj Å¾e tabulka existuje
docker exec -it claude-postgres psql -U claude -d claude_test -c "\dt"
```

### Port 3000 nebo 5432 je obsazenÃ½
```bash
# Najdi proces na portu
sudo lsof -i :3000
sudo lsof -i :5432

# ZmÄ›Åˆ port v .env nebo docker-compose.yml
```

## ğŸ“Š Screenshoty

### Desktop View
- ModernÃ­ gradient pozadÃ­ (blue-indigo)
- CentrovanÃ½ layout (max-width: 2xl)
- VelkÃ¡ karta se shadow
- PlnÃ¡ funkcionalita TODO managementu

### Mobile View
- ResponzivnÃ­ design
- Stack layout
- Touch-friendly tlaÄÃ­tka
- OptimalizovanÃ¡ velikost textÅ¯

## ğŸ”’ Security Features
- Input validace (title required, not empty)
- ID validace (musÃ­ bÃ½t ÄÃ­slo)
- SQL injection protection (parameterized queries)
- CORS enabled pro API access
- Error handling bez leak sensitive info

## ğŸš€ Production Deployment

### Environment Variables
```bash
# .env soubor
PORT=3000
POSTGRES_USER=claude
POSTGRES_PASSWORD=strong_password_here
POSTGRES_DB=claude_test
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
```

### Docker Production
```bash
# Build & run
docker compose up -d

# Scale (pokud potÅ™eba)
docker compose up -d --scale postgres=1
```

## ğŸ“ˆ BudoucÃ­ vylepÅ¡enÃ­
- [ ] Autentizace (JWT)
- [ ] Multi-user support
- [ ] Todo categories/tags
- [ ] Due dates
- [ ] Priority levels
- [ ] Search & filter
- [ ] Dark mode
- [ ] Offline support (PWA)
- [ ] Unit & integration tests
- [ ] CI/CD pipeline
